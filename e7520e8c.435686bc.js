(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{109:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return p})),n.d(t,"default",(function(){return h}));var a=n(3),r=n(7),o=(n(0),n(119)),s=n(125),i=n(126),c={id:"sending-the-object",title:"Sending the Object",sidebar_label:"Sending the Object"},l={unversionedId:"sending-the-object",id:"sending-the-object",isDocsHomePage:!1,title:"Sending the Object",description:"How to contact the API",source:"@site/docs/sample-sending-the-object.md",slug:"/sending-the-object",permalink:"/api/v3/docs/sending-the-object",version:"current",sidebar_label:"Sending the Object",sidebar:"someSidebar",previous:{title:"Creating the API Object",permalink:"/api/v3/docs/creating-the-api-object"},next:{title:"The Response Object",permalink:"/api/v3/docs/interpreting-the-response"}},p=[{value:"How to contact the API",id:"how-to-contact-the-api",children:[{value:"Packages by the SkyCiv Team",id:"packages-by-the-skyciv-team",children:[]},{value:"Including the SkyCiv API file",id:"including-the-skyciv-api-file",children:[]},{value:"Manually calling the API",id:"manually-calling-the-api",children:[]}]}],u={toc:p};function h(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"how-to-contact-the-api"},"How to contact the API"),Object(o.b)("p",null,"Once we have ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"/api/v3/docs/creating-the-api-object#api-object"}),"assigned the API object to a variable")," describing our model, we send it to SkyCiv for analysis via the API. This is achieved by the use of a POST request. If you'd like to learn more about HTTP methods, ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.w3schools.com/tags/ref_httpmethods.asp"}),"w3schools.com provides a great definition"),"."),Object(o.b)("p",null,"There are various ways to contact the API:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Using the ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"packages"}),"packages")," developed by the SkyCiv team ",Object(o.b)("strong",{parentName:"li"},Object(o.b)("em",{parentName:"strong"},"(highly recommended)")),"."),Object(o.b)("li",{parentName:"ul"},"Download the SkyCiv API file and include it in you project."),Object(o.b)("li",{parentName:"ul"},"Constructing the call manually.")),Object(o.b)("h3",{id:"packages-by-the-skyciv-team"},"Packages by the SkyCiv Team"),Object(o.b)("p",null,"You can view and learn about the available packages in the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"packages"}),"Packages")," section. We highly recommend this approach as we will continue to improve these packages to provide useful tools. This method is common industry practice as it helps keep your code clean and easy to read."),Object(o.b)("p",null,"Although it may initially take longer to get setup, once you have an understanding of how package managers work (which we have provided) it will make future projects very quick and robust."),Object(o.b)("h3",{id:"including-the-skyciv-api-file"},"Including the SkyCiv API file"),Object(o.b)("p",null,"Alternatively, you can manually include the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/skyciv/skyciv-api"}),"SkyCiv API file via GitHub")," in your project which will make the request for you (by calling the ",Object(o.b)("inlineCode",{parentName:"p"},"skyciv.request()")," method). For example, if you're using JavaScript then you can find the module here: ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://api.skyciv.com/dist/v3/javascript/skyciv.js"}),"https://api.skyciv.com/dist/v3/javascript/skyciv.js")),Object(o.b)("p",null,"To use this JavaScript module, the ",Object(o.b)("inlineCode",{parentName:"p"},"request()")," function would be called as follows:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js",metastring:'title="manual-use-of-skyciv-package.js"',title:'"manual-use-of-skyciv-package.js"'}),"const skyciv = require('skyciv');\n\nskyciv.request(YOUR_API_OBJECT, function (res) {\n  console.log(res); // do something with response\n});\n")),Object(o.b)("h3",{id:"manually-calling-the-api"},"Manually calling the API"),Object(o.b)("p",null,"You can manually make a HTTP/HTTPS POST Request to either of the following endpoints depending on whether you wish to use HTTP or HTTPS:"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"HTTPS:"))," ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://api.skyciv.com:8085/v3"}),"https://api.skyciv.com:8085/v3")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"HTTP:"))," ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"http://api.skyciv.com:8086/v3"}),"http://api.skyciv.com:8086/v3")),Object(o.b)("p",null,"The following links provide a live demonstration of how to achieve this across various languages. Just add your own credentials to the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"/api/v3/docs/the-request-object#auth"}),Object(o.b)("inlineCode",{parentName:"a"},"auth"))," object!"),Object(o.b)("p",null,"Comments are provided to help you understand exactly what is happening. Notice that after removing the comments and print statements, the actual code is only a fraction of the file."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://repl.it/@Stevieba/SkyCiv-API-or-Nodejs-v12161-or-Simple-metric-beam"}),"Node.js")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://repl.it/@Stevieba/SkyCiv-API-or-HTMLJS-or-Simple-metric-beam"}),"HTML/JavaScript")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://repl.it/@Stevieba/SkyCiv-API-or-Python-27-or-Simple-metric-beam"}),"Python 2")," - ",Object(o.b)("strong",{parentName:"li"},Object(o.b)("em",{parentName:"strong"},"Note:"))," No longer supported by the Python Software Foundation, Python 3 is preferred."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://repl.it/@Stevieba/SkyCiv-API-or-Python-382-or-Simple-metric-beam"}),"Python 3")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://repl.it/@StuartGale/SkyCiv-API-C-sharp#main.cs"}),"C#"))),Object(o.b)("p",null,"The code located in the above links has also been provided below."),Object(o.b)("br",null),Object(o.b)(s.a,{defaultValue:"node-js",values:[{label:"Node.js",value:"node-js"},{label:"HTML/JS",value:"html-js"},{label:"JQuery",value:"jquery"},{label:"Python",value:"py"},{label:"C#",value:"cs"}],mdxType:"Tabs"},Object(o.b)(i.a,{value:"node-js",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"/*\n  Note: We HIGHLY recommend using the skyciv NPM package to \n  achieve the following in a couple of lines of code! \n  https://www.npmjs.com/package/skyciv\n  */\n\n// Import the https module to provide access to the request method\nconst https = require('https');\n\n// Import file system to let us write results to a new file\nconst fs = require('fs');\n\n/* \nImport the API object data - Add a file in the same directory \nas this script with the name defined below. \nPlace your JSON object inside this file. Example: \nhttps://repl.it/@Stevieba/SkyCiv-API-or-Nodejs-v12161-or-Simple-metric-beam\n ./ prefix indicates the file is in the same directory as this script\n*/\nconst rawData = require('./input-simple-beam.json');\n\n// Convert the JSON object into a string\nconst data = JSON.stringify(rawData);\n\n// Define an object containing the http request options and assign it to the variable options for later use.\nconst options = {\n    hostname: 'api.skyciv.com', // Where to send the data\n    path: '/v3',\n    method: 'POST', // Type of http method. Further reading: http://bit.ly/http-methods\n    headers: {\n        // Describe what is being sent\n        'Content-Type': 'application/json',\n        'Content-Length': data.length,\n    },\n};\n\n// Create a request function that handles events during the request\nconst req = https\n  .request(options, (res) => {\n        // Create a variable to hold the response data\n        let responseData = '';\n\n    // Print the status code of the request. 200 means the message \n    // was successfully sent and received but does not necessarily \n    // mean the analysis was successful.\n        console.log('Status Code:', res.statusCode);\n\n        // Every time some of the response comes through, add it to the res variable\n        // In this case 'data' refers to an event.\n        res.on('data', (chunk) => {\n            responseData += chunk;\n        });\n\n        // When the entire response has been received run the code below\n        res.on('end', () => {\n            const parsedResults = JSON.parse(responseData);\n\n            if (parsedResults.response.status === 0) {\n                // This is a good place to start doing things with the results\n\n                // Write the results to a file named output.json for inspection\n                fs.writeFileSync(\n                    './output.json',\n                    JSON.stringify(parsedResults, null, 2),\n                    'utf-8'\n                );\n                console.log(\n                    `Successfully solved, see output.json to inspect results.`\n                );\n            } else {\n                // This is where you can handle a failed solve\n                console.log(\n                    `Unsuccessful with error message: ${parsedResults.response.msg}`\n                );\n            }\n        });\n    })\n    .on('error', (err) => {\n        // Catch any errors and print the error message\n        console.log('Error: ', err.message);\n    });\n\n// Make the call with your data\nreq.write(data);\nreq.end();\n"))),Object(o.b)(i.a,{value:"html-js",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-html"}),'\x3c!-- Note: If you\'re using a framework that allows the use of modules, we HIGHLY recommend \nusing the skyciv NPM package to achieve the following in a couple of lines of code! --\x3e\n\n\x3c!-- START CODE --\x3e\n<!DOCTYPE html>\n\n<head></head>\n\n<body>\n  <textarea id="response" style={{width: "90%"}} rows="30" wrap="off">Processing request...</textarea>\n</body>\n\n<script>\n\n  // Define your JSON API object\n  const data = YOUR_API_OBJECT\n\n  // Use the fetch API to make a POST request using a Promise (a more advanced topic).\n  // When the first block has finished collecting the data, ".then" will trigger and so on.\n  fetch("https://api.skyciv.com/v3", {\n      method: "POST", // Type of http method. Further reading: http://bit.ly/http-methods\n      headers: { \'Content-Type\': \'application/json\' }, // Describe what is being sent\n      body: JSON.stringify(data) // Your JSON object describing your structure \n    })\n    .then(response => response.json()) // THEN convert the response to a JSON object\n    .then(data => { // THEN do something with the data\n      console.log(\'Success\');\n\n      // Add the response data to the textarea html element\n      document.getElementById(\'response\').value = JSON.stringify(data, null, \'\\t\');\n    })\n    .catch((error) => {\n      // Catch and handle any errors\n      console.error(\'Error:\', error);\n    });\n<\/script>\n\n</html>\n'))),Object(o.b)(i.a,{value:"jquery",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'// Using the ajax() method provided by the JQuery library\n\nconst data = YOUR_API_OBJECT\n\n$.ajax({\n  url: "https://api.skyciv.com:8085/v3",\n  data: JSON.stringify(data),\n  type: "POST",\n  success: function (data) {\n    // Do something with the API response "data" here\n  }\n});\n'))),Object(o.b)(i.a,{value:"py",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-py"}),"# Note: We HIGHLY recommend using the skyciv pip package \n# to achieve the following in a couple of lines of code!\n\n# Import 'json' library to help manipulate the JSON objects\nimport json\n\n# Import the library to help make http GET requests\nimport http.client as httplib  # Python 3.x.x\n\n# Wrap in a try block to gracefully handle errors\ntry:\n\n  # Create request header to define the content that will be sent\n  headers = {'Content-Type': 'application/json'}\n\n  print('1. Establishing a connection to SkyCiv API')\n  # Setup a connection to the SkyCiv API\n  # Don't add http://, https:// or www. before this URL\n  # Port 8085 = send information over https (suitable for sensitive information)\n  # Port 8086 = send information over http\n  conn = httplib.HTTPSConnection('api.skyciv.com', 8085)\n\n  # Define path of beam data - add a file in the same directory \n  #as this script with the name defined below. \n  # Place your JSON API object inside this file. Example: \n  # https://repl.it/@Stevieba/SkyCiv-API-or-Python-382-or-Simple-metric-beam\n  beam_data_file_path = 'input-simple-beam.json'\n  print(f'2. Reading beam data from file: { beam_data_file_path }')\n\n  # Use a with block to open and read the input object we have defined in the file\n  # named \"input-simple-beam.json\". The With keyword will close the file after use.\n  with open(beam_data_file_path) as f:\n\n    # Load data from other file into a variable.\n    # The load() method will interpret a JSON object into a python object.\n    beam_data = json.load(f)\n\n    # Convert API 'data' to JSON String.\n    # The function dumps(), not to be confused with dump(), will encode\n    # a python object into a JSON string.\n    stringified_data = json.dumps(beam_data, separators=(',', ':'))\n\n  # By now the with block will have closed the input-simple-beam.json file.\n\n  # Make the request to the SkyCiv API.\n  print('3. Sending request to the SkyCiv API, just a moment...')\n  conn.request('POST', '/v3', stringified_data, headers)\n\n  # Further reading on GET, POST and other http request \n  # methods: http://bit.ly/http-methods\n\n  # Get the response object.\n  raw_res = conn.getresponse()\n\n  # Read the response object.\n  res_data = raw_res.read()\n  print('4. Response received and interpreted.')\n\n  # Close the connection.\n  conn.close()\n  print('5. SkyCiv API connection closed.')\n\n  # Parse (convert) the response into a JSON object so we can manipulate and read it.\n  parsed_res = json.loads(res_data)\n\n  # Check success criteria\n  if (parsed_res[\"response\"][\"status\"] == 0):\n    # Successfully solved\n    # Print output to json file for inspecting.\n    # 'w' param indicates 'write' which will overwrite the contents of the specified file.\n    with open('output.json', 'w') as f:\n      print(parsed_res, file=f)\n\n    print('\\nFinished!')\n\n    # print(f'\\nDeflections: { parsed_res['response'] }')\n\n    print('\\nCheck the file named output.json and click the format button for easier viewing.')\n  else:\n    print(f'\\nUnsuccessful solve with message: { parsed_res[\"response\"][\"msg\"] }')\n\nexcept Exception as e: # Python 2.6 or higher\n  print(f'\\nThe following error occured: {e}')\n\n"))),Object(o.b)(i.a,{value:"cs",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-cs"}),'using System;\nusing System.IO;\nusing System.Text;\n\nnamespace SkyCiv\n{\n    class Program\n    {\n        private static string inputFilePath = "input-simple-beam.json";\n        private static string outputFilePath = "output.json";\n\n        static void Main(string[] args)\n        {\n            // Load the input data (authentication & SkyCiv API commands), from a file\n            var jsonRequestBody = File.ReadAllText(inputFilePath);\n\n            // Try calling the SkyCiv API\n            if( SkyCiv.TryRequest(jsonRequestBody, out var response, post: true) )\n            {\n                // Request succeeded, save the response\n                File.WriteAllText(outputFilePath, response);\n\n                // Notify in the console\n                Console.Write($"The HTTP request to the SkyCiv API was successful - see {outputFilePath} for the JSON response");\n            }\n            else\n            {\n                // Request failed, notify in the console (response will be an error message)\n                Console.Write(response);\n            }\n        }\n    }\n\n    public static class SkyCiv\n    {\n        private static string _address = "https://api.skyciv.com/v3";\n        private static string _contentType = "application/json";\n        private static string _post = "POST";\n        private static string _errorMessage = "An error occured";\n        \n        /// <summary>\n        /// Make a request to the SkyCiv API\n        /// </summary>\n        /// <param name="requestBody">Serialized JSON including auth and function data.</param>\n        /// <param name="response">The response from the SkyCiv API</param>\n        /// <param name="post">Whether to use POST or GET request type. Default = POST</param>\n        /// <returns>A boolean indicating whether the HTTP request was made and the reply received successfully</returns>\n        public static bool TryRequest(string requestBody, out string response, bool post = true)\n        {\n            using (var client = new WebClient())\n            {\n                client.Headers[HttpRequestHeader.ContentType] = _contentType;\n\n                return SafeRequest(client, requestBody, out response, post: post);\n            }\n        }\n\n        /// <summary>\n        /// Make a generic post or get request and catch exceptions\n        /// </summary>\n        /// <param name="client">Web client object to use for the request.</param>\n        /// <param name="requestBody">HTTP Request body</param>\n        /// <param name="response">The response from the SkyCiv API</param>\n        /// <param name="post">Whether to use POST or GET request type. Default = POST</param>\n        /// <returns>A boolean indicating whether the HTTP request was made and the reply received successfully</returns>\n        private static bool SafeRequest(WebClient client, string requestBody, out string response, bool post = true)\n        {\n            try\n            {\n                // Make a POST request\n                if( post )\n                {\n                    var data = client.UploadData(_address, _post, Encoding.UTF8.GetBytes(requestBody));\n                    response = Encoding.UTF8.GetString(data);\n                    return true;\n                }\n\n                // Make a GET request\n                response = client.DownloadString(_address);\n                return true;\n            }\n            catch (Exception e)\n            {\n                response = $"{_errorMessage}: {e.Message}";\n                \n                return false;\n            }\n        }\n    }\n}\n\n')))),Object(o.b)("br",null))}h.isMDXComponent=!0},119:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return b}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=r.a.createContext({}),p=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),u=p(n),d=a,b=u["".concat(s,".").concat(d)]||u[d]||h[d]||o;return n?r.a.createElement(b,i(i({ref:t},l),{},{components:n})):r.a.createElement(b,i({ref:t},l))}));function b(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,s=new Array(o);s[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,s[1]=i;for(var l=2;l<o;l++)s[l]=n[l];return r.a.createElement.apply(null,s)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},120:function(e,t,n){"use strict";function a(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}t.a=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(r&&(r+=" "),r+=t);return r}},123:function(e,t,n){"use strict";var a=n(0),r=n(124);t.a=function(){const e=Object(a.useContext)(r.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},124:function(e,t,n){"use strict";var a=n(0);const r=Object(a.createContext)(void 0);t.a=r},125:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(123),s=n(120),i=n(55),c=n.n(i);const l=37,p=39;t.a=function(e){const{lazy:t,block:n,defaultValue:i,values:u,groupId:h,className:d}=e,{tabGroupChoices:b,setTabGroupChoices:m}=Object(o.a)(),[f,y]=Object(a.useState)(i),v=a.Children.toArray(e.children);if(null!=h){const e=b[h];null!=e&&e!==f&&u.some((t=>t.value===e))&&y(e)}const g=e=>{y(e),null!=h&&m(h,e)},j=[];return r.a.createElement("div",null,r.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(s.a)("tabs",{"tabs--block":n},d)},u.map((({value:e,label:t})=>r.a.createElement("li",{role:"tab",tabIndex:0,"aria-selected":f===e,className:Object(s.a)("tabs__item",c.a.tabItem,{"tabs__item--active":f===e}),key:e,ref:e=>j.push(e),onKeyDown:e=>{((e,t,n)=>{switch(n.keyCode){case p:((e,t)=>{const n=e.indexOf(t)+1;e[n]?e[n].focus():e[0].focus()})(e,t);break;case l:((e,t)=>{const n=e.indexOf(t)-1;e[n]?e[n].focus():e[e.length-1].focus()})(e,t)}})(j,e.target,e)},onFocus:()=>g(e),onClick:()=>{g(e)}},t)))),t?Object(a.cloneElement)(v.filter((e=>e.props.value===f))[0],{className:"margin-vert--md"}):r.a.createElement("div",{className:"margin-vert--md"},v.map(((e,t)=>Object(a.cloneElement)(e,{key:t,hidden:e.props.value!==f})))))}},126:function(e,t,n){"use strict";var a=n(3),r=n(0),o=n.n(r);t.a=function({children:e,hidden:t,className:n}){return o.a.createElement("div",Object(a.a)({role:"tabpanel"},{hidden:t,className:n}),e)}}}]);